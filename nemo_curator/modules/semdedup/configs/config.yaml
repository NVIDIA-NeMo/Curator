root: '/raid/vjawa/semdedup_debug'
sample: -1 # todo name to num_samples
id_col:
   name: 'id' # 'id' #'adlr_id'
   type: 'str' # 'int' #'str'

# Embeddings
embeddings:
  input_column: 'text'
  input_file_type: 'json'
  input_data_dir: '/datasets/semdedup/c4/realnewslike/modified'
  save_loc: 'embeddings_crossfit_c4_realnewslike_all_MiniLM_L6_v2'
  path_or_name: 'sentence-transformers/all-MiniLM-L6-v2'
  emb_size: 768
  batch_size: 128
  max_mem_gb: 25

clustering:
  save_loc: "vjawa_results_st_all_MiniLM_L6_v2"
  #save_loc: "results_crossfit_fb_c4_10a"
  num_clusters: 1000 # -- number of clusters
  seed: 1234
  niter: 100
  # Kmeans can only be done with L2 using cuML.
  Kmeans_with_cos_dist: False # Only False allowed


semdedup:
  # -- which example to keep from each group of duplicates
  which_to_keep: "hard"
  # largest cluster size the memory is large enough to process. If the
  # cluster size is larger than it, we will devide the cluster into small
  # clusters and process each one separately.
  largest_cluster_size_to_process: 100000
  sim_metric: "cosine" # Only cosine is allowed.

extract_dedup:
  use_eps_from_yml: True
  eps:  0.01 0.001
