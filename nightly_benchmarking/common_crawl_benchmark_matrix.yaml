# Matrix configuration for Common Crawl download/extract benchmark

default_timeout_s: 7200
results_dir: /raid/benchmarks/ray-curator/common-crawl-results

# Optional sinks
mlflow:
  tracking_uri: ${MLFLOW_TRACKING_URI}
  experiment: ray-curator-common-crawl

# Whether to delete scratch dirs after each run
delete_scratch: true

entries:
  - name: cc_main_ray_data_cast_as_actor
    script: common_crawl_benchmark.py
    args: >-
      --download_path {session}/scratch/downloads
      --output_path {session}/scratch/output
      --output_format parquet
      --crawl_type main
      --start_snapshot 2023-01
      --end_snapshot 2023-10
      --html_extraction justext
      --url_limit 768
      --add_filename_column
      --executor ray_data
      --ray_data_cast_as_actor
    timeout_s: 30000
    ray:
      num_cpus: 64
      num_gpus: 0
      enable_object_spilling: false

  - name: cc_main_raydata
    script: common_crawl_benchmark.py
    args: >-
      --download_path {session}/scratch/downloads
      --output_path {session}/scratch/output
      --output_format parquet
      --crawl_type main
      --start_snapshot 2023-01
      --end_snapshot 2023-10
      --html_extraction justext
      --url_limit 768
      --add_filename_column
      --executor ray_data
    timeout_s: 20000
    ray:
      num_cpus: 64
      num_gpus: 0
      enable_object_spilling: false
